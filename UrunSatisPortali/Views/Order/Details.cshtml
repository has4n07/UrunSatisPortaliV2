@model OrderViewModel

<div class="container py-5">
    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <a asp-action="Index" class="text-decoration-none text-muted small fw-bold mb-1 d-inline-block">
                <i class="bi bi-arrow-left me-1"></i> Siparişlerime Dön
            </a>
            <h2 class="h3 fw-bold mb-0" style="font-family: 'Playfair Display', serif;">Sipariş #@Model.OrderHeader.Id
            </h2>
        </div>
        <div class="text-end">
            <span class="d-block text-muted small">Sipariş Tarihi</span>
            <span class="fw-medium">@Model.OrderHeader.OrderDate.ToShortDateString()</span>
        </div>
    </div>

    <div class="row g-4">
        <!-- Main Content -->
        <div class="col-lg-8">
            <!-- Items Card -->
            <div class="card border-0 shadow-sm rounded-3 mb-4">
                <div class="card-header bg-white py-3 border-bottom">
                    <h5 class="fw-bold m-0 small text-uppercase">Sipariş İçeriği</h5>
                </div>
                <div class="card-body p-0">
                    <ul class="list-group list-group-flush">
                        @foreach (var detail in Model.OrderDetail)
                        {
                            <li class="list-group-item p-3 border-bottom-0">
                                <div class="d-flex align-items-center">
                                    <div class="flex-grow-1">
                                        <h6 class="mb-1 fw-bold text-dark">@detail.Product.Name</h6>
                                        <div class="d-flex justify-content-between align-items-center">
                                            <small class="text-muted">
                                                @detail.Count adet x @detail.Price.ToString("c")
                                            </small>
                                            <span class="fw-bold">@((detail.Count * detail.Price).ToString("c"))</span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        }
                    </ul>
                </div>
                <div class="card-footer bg-light py-3 border-top">
                    <div class="d-flex justify-content-between align-items-center">
                        <span class="fw-bold text-muted small text-uppercase">Toplam Tutar</span>
                        <span class="h5 mb-0 fw-bold text-dark">@Model.OrderHeader.OrderTotal.ToString("c")</span>
                    </div>
                </div>
            </div>

            <!-- Status Timeline / Info -->
            <div class="card border-0 shadow-sm rounded-3">
                <div class="card-body p-4">
                    <h5 class="fw-bold mb-4 small text-uppercase">Sipariş Durumu</h5>

                    <div class="d-flex align-items-center">
                        <div class="me-3">
                            @if (Model.OrderHeader.OrderStatus == "Pending")
                            {
                                <i class="bi bi-clock-history fs-1 text-warning"></i>
                            }
                            else if (Model.OrderHeader.OrderStatus == "Approved")
                            {
                                <i class="bi bi-check-circle fs-1 text-info"></i>
                            }
                            else if (Model.OrderHeader.OrderStatus == "Shipped")
                            {
                                <i class="bi bi-truck fs-1 text-success"></i>
                            }
                            else if (Model.OrderHeader.OrderStatus == "Cancelled")
                            {
                                <i class="bi bi-x-circle fs-1 text-danger"></i>
                            }
                            else
                            {
                                <i class="bi bi-info-circle fs-1 text-secondary"></i>
                            }
                        </div>
                        <div>
                            <h4 class="mb-1">
                                @if (Model.OrderHeader.OrderStatus == "Pending")
                                {
                                    <text>Siparişiniz Alındı</text>
                                }
                                else if (Model.OrderHeader.OrderStatus == "Approved")
                                {
                                    <text>Siparişiniz
                                        Onaylandı</text>
                                }
                                else if (Model.OrderHeader.OrderStatus == "Shipped")
                                {
                                    <text>Siparişiniz
                                        Kargolandı</text>
                                }
                                else if (Model.OrderHeader.OrderStatus == "Cancelled")
                                {
                                    <text>Sipariş İptal
                                        Edildi</text>
                                }
                                else
                                {
                                    @Model.OrderHeader.OrderStatus
                                }
                            </h4>
                            <p class="text-muted mb-0 small">
                                @if (Model.OrderHeader.OrderStatus == "Pending")
                                {
                                    <text>Ödemeniz kontrol ediliyor, en
                                        kısa sürede onaylanacaktır.</text>
                                }
                                else if (Model.OrderHeader.OrderStatus == "Approved")
                                {
                                    <text>Siparişiniz
                                        hazırlanıyor.</text>
                                }
                                else if (Model.OrderHeader.OrderStatus == "Shipped")
                                {
                                    <text>Siparişiniz kargo firmasına
                                        teslim edildi.</text>
                                }
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="col-lg-4">
            <!-- Delivery Details -->
            <div class="card border-0 shadow-sm rounded-3">
                <div class="card-header bg-white py-3 border-bottom">
                    <h5 class="fw-bold m-0 small text-uppercase">Teslimat Bilgileri</h5>
                </div>
                <div class="card-body p-4">
                    <div class="mb-3">
                        <label class="small text-muted text-uppercase fw-bold d-block mb-1">Alıcı</label>
                        <span class="fw-medium">@Model.OrderHeader.Name</span>
                    </div>
                    <div class="mb-3">
                        <label class="small text-muted text-uppercase fw-bold d-block mb-1">Telefon</label>
                        <span>@Model.OrderHeader.PhoneNumber</span>
                    </div>
                    <div>
                        <label class="small text-muted text-uppercase fw-bold d-block mb-1">Adres</label>
                        <p class="mb-0 text-muted small">
                            @Model.OrderHeader.StreetAddress<br />
                            @Model.OrderHeader.PostalCode, @Model.OrderHeader.City / @Model.OrderHeader.State
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
